{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\tienda-online-frontend\\\\src\\\\context\\\\AppContext.jsx\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AppContext = /*#__PURE__*/createContext();\nexport function AppProvider({\n  children\n}) {\n  _s();\n  const [token, setToken] = useState(() => {\n    return localStorage.getItem('token') || null;\n  });\n  const [carrito, setCarrito] = useState(() => {\n    const guardado = localStorage.getItem('carrito');\n    return guardado ? JSON.parse(guardado) : [];\n  });\n  useEffect(() => {\n    localStorage.setItem('carrito', JSON.stringify(carrito));\n  }, [carrito]);\n  const login = newToken => {\n    setToken(newToken);\n    localStorage.setItem('token', newToken);\n  };\n  const logout = () => {\n    setToken(null);\n    localStorage.removeItem('token');\n    setCarrito([]);\n    localStorage.removeItem('carrito');\n  };\n  const addToCart = producto => {\n    setCarrito(prev => {\n      const exist = prev.find(p => p.id === producto.id);\n      if (exist) {\n        return prev.map(p => p.id === producto.id ? {\n          ...p,\n          cantidad: p.cantidad + 1\n        } : p);\n      }\n      return [...prev, {\n        ...producto,\n        cantidad: 1\n      }];\n    });\n  };\n  const removeFromCart = id => {\n    setCarrito(prev => prev.filter(p => p.id !== id));\n  };\n  const increaseQty = id => {\n    setCarrito(prev => prev.map(p => p.id === id ? {\n      ...p,\n      cantidad: p.cantidad + 1\n    } : p));\n  };\n  const decreaseQty = id => {\n    setCarrito(prev => prev.reduce((acc, p) => {\n      if (p.id === id && p.cantidad > 1) {\n        acc.push({\n          ...p,\n          cantidad: p.cantidad - 1\n        });\n      } else if (p.id !== id) {\n        acc.push(p);\n      }\n      return acc;\n    }, []));\n  };\n  const clearCart = () => {\n    setCarrito([]);\n    localStorage.removeItem('carrito');\n  };\n  return /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n    value: {\n      token,\n      login,\n      logout,\n      carrito,\n      addToCart,\n      removeFromCart,\n      increaseQty,\n      decreaseQty,\n      clearCart\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n_s(AppProvider, \"74Y/liF0M+cwcLPvDQw57T8lRZA=\");\n_c = AppProvider;\nvar _c;\n$RefreshReg$(_c, \"AppProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","jsxDEV","_jsxDEV","AppContext","AppProvider","children","_s","token","setToken","localStorage","getItem","carrito","setCarrito","guardado","JSON","parse","setItem","stringify","login","newToken","logout","removeItem","addToCart","producto","prev","exist","find","p","id","map","cantidad","removeFromCart","filter","increaseQty","decreaseQty","reduce","acc","push","clearCart","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/xampp/htdocs/tienda-online-frontend/src/context/AppContext.jsx"],"sourcesContent":["import React, { createContext, useState, useEffect } from 'react'\r\n\r\nexport const AppContext = createContext()\r\n\r\nexport function AppProvider({ children }) {\r\n  const [token, setToken] = useState(() => {\r\n    return localStorage.getItem('token') || null\r\n  })\r\n\r\n  const [carrito, setCarrito] = useState(() => {\r\n    const guardado = localStorage.getItem('carrito')\r\n    return guardado ? JSON.parse(guardado) : []\r\n  })\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('carrito', JSON.stringify(carrito))\r\n  }, [carrito])\r\n\r\n  const login = (newToken) => {\r\n    setToken(newToken)\r\n    localStorage.setItem('token', newToken)\r\n  }\r\n\r\n  const logout = () => {\r\n    setToken(null)\r\n    localStorage.removeItem('token')\r\n    setCarrito([])\r\n    localStorage.removeItem('carrito')\r\n  }\r\n\r\n  const addToCart = (producto) => {\r\n    setCarrito(prev => {\r\n      const exist = prev.find(p => p.id === producto.id)\r\n      if (exist) {\r\n        return prev.map(p =>\r\n          p.id === producto.id\r\n            ? { ...p, cantidad: p.cantidad + 1 }\r\n            : p\r\n        )\r\n      }\r\n      return [...prev, { ...producto, cantidad: 1 }]\r\n    })\r\n  }\r\n\r\n  const removeFromCart = (id) => {\r\n    setCarrito(prev => prev.filter(p => p.id !== id))\r\n  }\r\n\r\n  const increaseQty = (id) => {\r\n    setCarrito(prev =>\r\n      prev.map(p =>\r\n        p.id === id ? { ...p, cantidad: p.cantidad + 1 } : p\r\n      )\r\n    )\r\n  }\r\n\r\n  const decreaseQty = (id) => {\r\n    setCarrito(prev =>\r\n      prev.reduce((acc, p) => {\r\n        if (p.id === id && p.cantidad > 1) {\r\n          acc.push({ ...p, cantidad: p.cantidad - 1 })\r\n        } else if (p.id !== id) {\r\n          acc.push(p)\r\n        }\r\n        return acc\r\n      }, [])\r\n    )\r\n  }\r\n\r\n  const clearCart = () => {\r\n    setCarrito([])\r\n    localStorage.removeItem('carrito')\r\n  }\r\n\r\n  return (\r\n    <AppContext.Provider\r\n      value={{\r\n        token,\r\n        login,\r\n        logout,\r\n        carrito,\r\n        addToCart,\r\n        removeFromCart,\r\n        increaseQty,\r\n        decreaseQty,\r\n        clearCart\r\n      }}\r\n    >\r\n      {children}\r\n    </AppContext.Provider>\r\n  )\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}